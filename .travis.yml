language: haxe

haxe:
  - development

sudo: false
addons:
  apt:
    packages:
      - gcc-multilib

os:
  - linux
  - osx

script:
  # Remove all ndll - we want to build them from source
  - rm -rf ndll
  - haxelib install hxcpp
  - make
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then
      mv ndll/Linux64/hxssl.ndll test;
    elif [ "${TRAVIS_OS_NAME}" = "osx" ]; then
      mv ndll/Mac64/hxssl.ndll test;
    fi
  - cd test
  # Build neko binary and test
  - haxe build-neko.hxml
  - neko run.n
  # Build cpp binary and test
  - haxe build-cpp.hxml
  - ./Run

notifications:
  email: false